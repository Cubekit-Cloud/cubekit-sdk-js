"use strict";var e,t,s,o,r,a,i,n,p,d,u,l,h=require("axios");exports.RelationsModesEnum=void 0,(e=exports.RelationsModesEnum||(exports.RelationsModesEnum={})).SYNC="sync",e.ATTACH="attach",e.DETACH="detach",exports.OperatorsEnum=void 0,(t=exports.OperatorsEnum||(exports.OperatorsEnum={})).EQUAL="=",t.INEQUAL="!=",t.LIKE="like",t.ILIKE="ilike",t.MORE=">",t.MORE_OR_EQUAL=">=",t.LESS="<",t.LESS_OR_EQUAL="<=",exports.FilterValueTypesEnum=void 0,(s=exports.FilterValueTypesEnum||(exports.FilterValueTypesEnum={})).POINTER="pointer",s.SCALAR="scalar",exports.FilterBooleansEnum=void 0,(o=exports.FilterBooleansEnum||(exports.FilterBooleansEnum={})).AND="and",o.OR="or",exports.FilterTypesEnum=void 0,(r=exports.FilterTypesEnum||(exports.FilterTypesEnum={})).GROUP="group",r.SINGLE="single",exports.JoinTypesEnum=void 0,(a=exports.JoinTypesEnum||(exports.JoinTypesEnum={})).LEFT="left",a.RIGHT="right",a.FULL="full",a.INNER="inner",exports.OrderDirectionsEnum=void 0,(i=exports.OrderDirectionsEnum||(exports.OrderDirectionsEnum={})).ASC="asc",i.DESC="desc",exports.OrderNullPositionsEnum=void 0,(n=exports.OrderNullPositionsEnum||(exports.OrderNullPositionsEnum={})).FIRST="first",n.LAST="last",exports.ResponseTypeEnum=void 0,(p=exports.ResponseTypeEnum||(exports.ResponseTypeEnum={})).RESOURCE="resource",p.EXPORT="export",exports.FileExportTypesEnum=void 0,(d=exports.FileExportTypesEnum||(exports.FileExportTypesEnum={})).XLSX="xlsx",d.CSV="csv",exports.ExportEncodingTypesEnum=void 0,(u=exports.ExportEncodingTypesEnum||(exports.ExportEncodingTypesEnum={})).UTF_8="utf-8",u.WINDOWS_1251="windows-1251",exports.RequestOrmMethodsEnum=void 0,(l=exports.RequestOrmMethodsEnum||(exports.RequestOrmMethodsEnum={})).SEARCH="search",l.GET_BY_ID="get_by_id",l.CREATE="create",l.UPDATE="update",l.DELETE="delete";const E="{key}";exports.CubekitOrmClient=class{axios;constructor(e){this.axios=h.create({baseURL:e.baseUrl,withCredentials:!0,headers:{"x-api-key":e.serviceKey}})}setConfig(e){this.axios.defaults.baseURL=e.baseUrl,this.axios.defaults.headers["x-api-key"]=e.serviceKey}setAuthorizationHeader(e){this.axios.defaults.headers.Authorization=e}send(e){switch(e.method){case exports.RequestOrmMethodsEnum.GET_BY_ID:return this.getById(e);case exports.RequestOrmMethodsEnum.CREATE:return this.create(e);case exports.RequestOrmMethodsEnum.UPDATE:return this.update(e);case exports.RequestOrmMethodsEnum.DELETE:return this.delete(e);default:return this.search(e)}}preparePathWithId(e,t){return e=e.indexOf(E)>-1?e.replace(E,t):"/"===e.slice(-1)?`${e}${t}`:`${e}/${t}`}search(e){let t=e.path;const s=e.options;return s.pagination&&(t+="?",s.pagination.limit&&(t=`${t}limit=${s.pagination.limit}&`),s.pagination.page&&(t=`${t}page=${s.pagination.page}`)),delete s.pagination,this.axios.post(t,s)}getById(e){const t=e.options;return this.axios.post(this.preparePathWithId(e.path,t.id),t)}create(e){return this.axios.post(e.path,e.options)}update(e){const t=e.options;return this.axios.put(this.preparePathWithId(e.path,t.id),e.options)}delete(e){const t=e.options;return this.axios.delete(this.preparePathWithId(e.path,t.id),{data:e.options})}},exports.CubekitStorageClient=class{axios;constructor(e){this.axios=h.create({baseURL:e.baseUrl,withCredentials:!0,headers:{"x-api-key":e.serviceKey}})}setConfig(e){this.axios.defaults.baseURL=e.baseUrl,this.axios.defaults.headers["x-api-key"]=e.serviceKey}setAuthorizationHeader(e){this.axios.defaults.headers.Authorization=e}getFolderTree(e){return this.axios.get(`/tree?path=${encodeURIComponent(e||"/")}`).then((e=>e.data.data))}view(e,t,s,o,r){const a=new URLSearchParams;return a.append("path",e||"/"),t&&a.append("order_by",t),s&&a.append("order",s),o&&a.append("filter_by",o),r&&a.append("filter",r),this.axios.get(`/view?${a.toString()}`).then((e=>e.data.data))}createDirectory(e){return this.axios.post(`/createDirectory?path=${encodeURIComponent(e)}`).then((e=>e.data))}delete(e){return this.axios.delete("/delete",{data:e}).then((e=>e.data))}upload(e,t,s,o,r){const a=new FormData;return a.append("upload_file",t),this.axios.post(`/upload?path=${encodeURIComponent(e)}&file_name=${s}`,a,{onUploadProgress:o,signal:r,headers:{"Content-Type":"multipart/form-data"}}).then((e=>e.data))}resend(e){return this.axios.request(e).then((e=>e.data))}simpleUpload(e,t,s,o){const r=new FormData;return r.append("upload_file",t),this.axios.post(`/simpleUpload?path=${encodeURIComponent(e)}`,r,{onUploadProgress:s,signal:o,headers:{"Content-Type":"multipart/form-data"}}).then((e=>e.data))}move(e,t){return this.axios.post(`/move?source=${encodeURIComponent(e)}&target=${encodeURIComponent(t)}`).then((e=>e.data))}download(e,t){return this.axios.post(`/bulkDownload?path=${encodeURIComponent(e)}`,t,{responseType:"blob"})}};
//# sourceMappingURL=index.js.map
